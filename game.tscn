[gd_scene load_steps=28 format=4 uid="uid://c8sy6aajm7w64"]

[ext_resource type="Script" path="res://scripts/game.gd" id="1_7eqvp"]
[ext_resource type="Script" path="res://addons/phantom_camera/scripts/phantom_camera/phantom_camera_2d.gd" id="2_cbdkv"]
[ext_resource type="Script" path="res://addons/phantom_camera/scripts/resources/tween_resource.gd" id="3_dbcv8"]
[ext_resource type="PackedScene" uid="uid://3noy6u4d4ct7" path="res://ui_assests/pause_menu.tscn" id="3_vetdy"]
[ext_resource type="Script" path="res://scripts/player/player_manager.gd" id="4_is3rb"]
[ext_resource type="Script" path="res://scripts/level_manager.gd" id="4_nffec"]
[ext_resource type="Script" path="res://addons/phantom_camera/scripts/phantom_camera_host/phantom_camera_host.gd" id="4_pr4v3"]
[ext_resource type="PackedScene" path="res://powerup_box.tscn" id="5_peaqq"]
[ext_resource type="Theme" uid="uid://d3us6r3u2b0ao" path="res://resources/base_theme.tres" id="6_mox8l"]
[ext_resource type="PackedScene" path="res://ui_assests/select_player.tscn" id="8_tem8k"]
[ext_resource type="Shader" path="res://resources/shaders/checker.gdshader" id="10_qfmro"]
[ext_resource type="Script" path="res://scripts/powerup/powerup_manager.gd" id="11_3vt1j"]
[ext_resource type="Texture2D" uid="uid://p4ot40al8xad" path="res://icon.svg" id="11_aa0fs"]
[ext_resource type="Script" path="res://scripts/powerup/powerup.gd" id="12_so7cd"]
[ext_resource type="Resource" uid="uid://df115tgnjt566" path="res://powerups/weak.tres" id="13_xqvva"]
[ext_resource type="Resource" uid="uid://b7vi7ftg1ogjj" path="res://powerups/strong.tres" id="16_v6rox"]

[sub_resource type="InputEventKey" id="InputEventKey_2q1w7"]
device = -1
keycode = 32
unicode = 32

[sub_resource type="Shortcut" id="Shortcut_cg4hy"]
events = [SubResource("InputEventKey_2q1w7")]

[sub_resource type="InputEventKey" id="InputEventKey_8ho4b"]
device = -1
keycode = 70
unicode = 102

[sub_resource type="Shortcut" id="Shortcut_3csty"]
events = [SubResource("InputEventKey_8ho4b")]

[sub_resource type="Resource" id="Resource_nnrrt"]
script = ExtResource("3_dbcv8")
duration = 1.0
transition = 0
ease = 2

[sub_resource type="ShaderMaterial" id="ShaderMaterial_polgw"]
shader = ExtResource("10_qfmro")
shader_parameter/grid_size = Vector2(3, 1000)
shader_parameter/color1 = Color(1, 1, 1, 0.501961)
shader_parameter/color2 = Color(0, 0, 0, 0.501961)
shader_parameter/aspect_ratio_vector = Vector2(1, 1.1)

[node name="Game" type="Node2D" node_paths=PackedStringArray("player_manager", "powerup_manager", "level_manager", "state_label", "next_button", "powerup_button", "select_player_menu", "camera")]
script = ExtResource("1_7eqvp")
player_manager = NodePath("Players")
powerup_manager = NodePath("Powerups")
level_manager = NodePath("LevelManager")
state_label = NodePath("Container/StateLabel")
next_button = NodePath("Container/NextButton")
powerup_button = NodePath("Container/PowerupButton")
select_player_menu = NodePath("Container/SelectPlayer")
camera = NodePath("PhantomCamera2D")

[node name="LevelManager" type="Node" parent="."]
script = ExtResource("4_nffec")

[node name="Container" type="CanvasLayer" parent="."]

[node name="NextButton" type="Button" parent="Container"]
anchors_preset = 3
anchor_left = 1.0
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -187.0
offset_top = -127.0
offset_right = -78.0
offset_bottom = -81.0
grow_horizontal = 0
grow_vertical = 0
theme = ExtResource("6_mox8l")
theme_override_font_sizes/font_size = 23
shortcut = SubResource("Shortcut_cg4hy")
text = "Next"
metadata/_edit_use_anchors_ = true

[node name="StateLabel" type="Label" parent="Container"]
offset_left = 30.0
offset_top = 27.0
offset_right = 150.0
offset_bottom = 68.0
size_flags_horizontal = 0
size_flags_vertical = 0
theme = ExtResource("6_mox8l")
theme_override_font_sizes/font_size = 30
text = "Player 1"
vertical_alignment = 1

[node name="PowerupButton" type="TextureButton" parent="Container"]
texture_filter = 3
anchors_preset = 2
anchor_top = 1.0
anchor_bottom = 1.0
offset_left = 40.0
offset_top = -160.0
offset_right = 160.0
offset_bottom = -40.0
grow_vertical = 0
disabled = true
action_mode = 0
shortcut = SubResource("Shortcut_3csty")
stretch_mode = 0

[node name="SelectPlayer" parent="Container" instance=ExtResource("8_tem8k")]
visible = false
size_flags_horizontal = 3
size_flags_vertical = 3

[node name="PauseMenu" parent="Container" instance=ExtResource("3_vetdy")]
visible = false
custom_minimum_size = Vector2(1156, 650)
size_flags_horizontal = 3
size_flags_vertical = 3

[node name="PhantomCamera2D" type="Node2D" parent="."]
top_level = true
position = Vector2(565, 308)
scale = Vector2(1.5, 1.5)
script = ExtResource("2_cbdkv")
priority = 100
follow_mode = 3
snap_to_pixel = true
tween_resource = SubResource("Resource_nnrrt")
tween_on_load = false
follow_damping = true
auto_zoom = true
auto_zoom_min = 0.2
auto_zoom_margin = Vector4(600, 300, 600, 300)
draw_limits = true
limit_left = -200
limit_bottom = 650

[node name="Camera2D" type="Camera2D" parent="."]
z_index = 10
position = Vector2(565, 308)
scale = Vector2(1.5, 1.5)
limit_left = -200
limit_bottom = 650
editor_draw_limits = true

[node name="PhantomCameraHost" type="Node" parent="Camera2D"]
process_priority = 300
process_physics_priority = 300
script = ExtResource("4_pr4v3")

[node name="Players" type="Node2D" parent="." node_paths=PackedStringArray("next_button")]
position = Vector2(305, 364)
script = ExtResource("4_is3rb")
next_button = NodePath("../Container/NextButton")

[node name="Sprite2D" type="Sprite2D" parent="."]
texture_repeat = 2
material = SubResource("ShaderMaterial_polgw")
position = Vector2(4200, -8300)
scale = Vector2(0.5, 140)
texture = ExtResource("11_aa0fs")

[node name="Powerups" type="Node2D" parent="."]
position = Vector2(1017, 356)
script = ExtResource("11_3vt1j")
powerup_types = Array[ExtResource("12_so7cd")]([ExtResource("13_xqvva"), ExtResource("16_v6rox")])

[node name="PowerupBox" parent="." instance=ExtResource("5_peaqq")]
position = Vector2(438, 556)

[connection signal="pressed" from="Container/NextButton" to="." method="_on_next_button_pressed"]
[connection signal="pressed" from="Container/PowerupButton" to="." method="_on_powerup_button_pressed"]
